<div>
  <app-topbar (searchTextChanged)="onSearchTextEntered($event)"></app-topbar>
</div>
<div class="formgroup-inline layout-dashboard">
  <div  class=" card-w-title col-12 md:col-3 lg:col-3 p-5">
    <app-filters class="try" (searchFilterChanged)="onSearchFilterEntered($event)"></app-filters>
  </div>

  <div  class=" card-w-title col-12 md:col-8 lg:col-8 p-5">
    <div class="p-col-12">
      <div class="p-inputgroup">
        <span class="p-inputgroup-addon">
          <i class="pi pi-search"></i>
        </span>
        <input pInputText type="text" class="p-inputtext-sm" placeholder="Search" [(ngModel)]="searchText" />
      </div>
    </div>
    <div *ngFor="let vehicle of vehicles">
      <div class="vehicles-card flex mb-3 mt-3" *ngIf="isMatched(vehicle)">
      <!-- <div class="card flex mb-3 mt-3" *ngIf="searchText === '' || vehicle.make.toLowerCase().includes(searchText) || vehicle.model.toLowerCase().includes(searchText) || vehicle.price.toLowerCase().includes(searchText) || vehicle.yearOfManufactor.toLowerCase().includes(searchText)">
      <div class="flex mb-3 mt-3" *ngIf="searchFilter === '' || vehicle.location.toLowerCase().includes(searchFilter)"> -->
          <div class="grid" style="cursor: pointer;">
          <div class="col-12 md:col-12 lg:col-5 flex align-items-center justify-content-center">
              <div class="p-fluid">
                <p-image src="{{vehicle.image}}" alt="Image" width="100%" [preview]="true"></p-image>
              </div>
          </div>
          <div class="col-12 md:col-12 lg:col-7 flex align-items-center justify-content-center" routerLink="/view" (click)="getVehicle(vehicle.id)">
            <div class="col-12 md:col-12 lg:col-12 ">
              <div class="mt-2">
                <p-tag [severity]="vehicle.foreignUsed? 'info':'warning'" value= "Foreign Used" [icon]="vehicle.foreignUsed? 'pi pi-check': 'pi pi-times'" [rounded]="true" class="ml-1"></p-tag>
                <p-tag [severity]="vehicle.locallyUsed? 'info':'warning'" value= "Locally Used" [icon]="vehicle.locallyUsed? 'pi pi-check': 'pi pi-times'" [rounded]="true" class="ml-2"></p-tag>
              </div>
            <div class="m-2 text-red-500 hover:text-red-700  font-bold ">Ksh. {{vehicle.price | number: '3.1-4' }}</div>
              <h6 class="m-2">
                {{vehicle.yearOfManufactor.split('-')[0]}} {{vehicle.make}} {{vehicle.model}}
              </h6>
              <p class="m-2">
                <strong>
                  {{vehicle.transmission}} | {{vehicle.engineSize}} | {{vehicle.mileage| number: '3.1-4' }} KM | {{vehicle.color}} | {{vehicle.vehicleType}}
                </strong>
              </p>
              <!-- <p-tag [value]={{vehicle.foreignUsed}} [severity]="getSeverity(vehicle.foreignUsed)"></p-tag> -->

              <p-divider></p-divider>
              <!-- <div class="formgroup-inline gap-7"> -->
                <h5 class="m-0">
                  {{vehicle.user.firstName}}
                </h5>

            <!-- </div> -->
              <p-rating [(ngModel)]="value" [readonly]="true" [cancel]="false"></p-rating>
              <div class="flex sm:flex-column align-items-center sm:align-items-end gap-3 sm:gap-2">
                <span class="text-2xl font-semibold">
                <img src={{vehicle.image}} alt="logo" height="30" class="mb-3"></span>
              </div>
            </div>
          </div>
        <!-- </div> -->
      <!-- </div> -->
          </div>
      </div>
    </div>
    <div class=" flex justify-content-center">
      <p-paginator (onPageChange)="onPageChange($event)" [first]="first" [rows]="rows" [totalRecords]="totalRecords" [rowsPerPageOptions]="[5, 10, 20, 30]" [showFirstLastIcon]="false"></p-paginator>
    </div>
  </div>
</div>

